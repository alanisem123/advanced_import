(("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]=("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]||[]).push([[11],{1715:function(t,e,n){},"64cc":function(t,e,n){},a955:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wizard"},[n("FilePreview"),n("b-card",{staticClass:"mt-2"},[n("b-tabs",{staticClass:"wizard-tabs",attrs:{"no-nav-style":"","content-class":"mt-0"},model:{value:t.step_index,callback:function(e){t.step_index=e},expression:"step_index"}},t._l(t.steps,(function(e,i){return n("b-tab",{key:i,attrs:{title:"","title-link-class":"d-none"}},[n("div",{staticClass:"steps text-center mb-2"},[n("b-badge",{attrs:{variant:"light"}},[t._v("Step "+t._s(t.step_index+1)+" of "+t._s(t.steps.length))])],1),n(e.element,{tag:"component",scopedSlots:t._u([{key:"left",fn:function(){return[t.step_index>0?n("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:0==t.step_index},on:{click:t.goToPrevStep}},[t._v("go back")]):n("span")]},proxy:!0},{key:"default",fn:function(){},proxy:!0},{key:"right",fn:function(e){var i=e.validation,s=e.processFunction;return[n("button",{directives:[{name:"show",rawName:"v-show",value:t.step_index<t.steps.length-1,expression:"step_index<(steps.length-1)"}],staticClass:"btn btn-outline-primary",attrs:{disabled:i.$invalid},on:{click:function(e){return t.goToNextStep(s)}}},[t._v("next")])]}}],null,!0)})],1)})),1)],1)],1)},s=[],a=n("1da1"),r=(n("96cf"),n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.items_proxy&&t.items_proxy.length>0?n("b-card",{staticClass:"mt-2",attrs:{id:"table-container",title:t.title}},[n("b-table",{attrs:{id:"my-table",items:t.items_proxy,small:"",bordered:"",striped:"",hover:"",thClass:"th-head"},scopedSlots:t._u([{key:"head()",fn:function(e){return[n("section",[n("span",{staticClass:"d-block small",attrs:{title:"REDCap field"}},[n("non-blank-space"),Boolean(t.getRedcapField(e.column))?n("b-badge",{attrs:{variant:"info"}},[n("span",[t._v(t._s(t.getRedcapField(e.column)))]),t.isPrimaryKey(e.column)?n("font-awesome-icon",{staticClass:"ml-1 text-warning",attrs:{icon:"star",title:"primary key","fixed-width":""}}):t.isDynamic(e.column)?n("font-awesome-icon",{staticClass:"ml-1 text-danger",attrs:{icon:"level-down-alt",title:"dynamic","fixed-width":""}}):n("font-awesome-icon",{staticClass:"ml-1 text-secondary",attrs:{icon:"check-circle",title:"standard","fixed-width":""}})],1):t._e()],1),n("span",{staticClass:"d-block small",attrs:{title:"CSV column"}},[t._v(t._s(e.column))])])]}}],null,!1,95129129)}),n("section",[t.counting?n("span",[t._v("Counting lines:")]):n("span",[t._v("Total lines:")]),n("span",[t._v(" "+t._s(t.formatNumber(t.total_lines)))])])],1):t._e()],1)}),c=[],o=n("3835"),l=n("2909"),d=n("5530"),u=(n("b0c0"),n("d81d"),n("4fad"),n("07ac"),n("2f62")),f={data:function(){return{}},computed:Object(d["a"])(Object(d["a"])({},Object(u["b"])({items:function(t){return t.csv_data.data},csvFields:function(t){return t.csv_data.fields},total_lines:function(t){return t.csv_data.total_lines},counting:function(t){return t.csv_data.counting},files:function(t){return t.import_settings.files},mapping:function(t){return t.import_settings.mapping},dynamic_fields:function(t){return t.import_settings.dynamic_fields}})),{},{title:function(){var t="Preview";if(this.files&&this.files.name){var e=this.files.name,n=void 0!==e&&e;n&&(t="".concat(n," (preview)"))}return t},items_proxy:function(){var t=this.files;if(!t){var e=Object(l["a"])(Array(5).keys()).map((function(){return{"no data":""}}));return e}return this.items}}),destroyed:function(){this.$store.dispatch("csv_data/stopCounting")},methods:{formatNumber:function(t){return new Intl.NumberFormat("en-US",{}).format(t)},getRedcapField:function(t){for(var e=Object(d["a"])({},this.mapping),n=this.csvFields.indexOf(t),i=0,s=Object.entries(e);i<s.length;i++){var a=Object(o["a"])(s[i],2),r=a[0],c=a[1];if(Object.values(c).indexOf(n)>=0)return r}},isDynamic:function(t){var e=this.getRedcapField(t);return!!e&&this.dynamic_fields.indexOf(e)>=0},isPrimaryKey:function(t){var e=this.getRedcapField(t);if(!e)return!1;var n=Object(d["a"])({},this.$store.state.import_settings),i=n.primary_key;return e==i}},watch:{files:{immediate:!0,handler:function(t){this.$store.dispatch("csv_data/countFileLinesFast",t)}}}},p=f,m=(n("ee23"),n("2877")),b=Object(m["a"])(p,r,c,!1,null,"9bd7fb0c",null),h=b.exports,v=[{element:function(){return n.e(6).then(n.bind(null,"8761"))}},{element:function(){return n.e(3).then(n.bind(null,"5a78"))}},{element:function(){return Promise.all([n.e(1),n.e(17)]).then(n.bind(null,"d622"))}},{element:function(){return n.e(5).then(n.bind(null,"43f0"))}},{element:function(){return n.e(9).then(n.bind(null,"12bd"))}},{element:function(){return n.e(10).then(n.bind(null,"ab0f"))}},{element:function(){return n.e(8).then(n.bind(null,"7406"))}},{element:function(){return n.e(15).then(n.bind(null,"01bd"))}}],_={components:{FilePreview:h},data:function(){return{step_index:0,steps:v,processing:!1}},created:function(){this.step=this.steps[0]},destroyed:function(){this.$store.dispatch("import_settings/reset"),this.$store.dispatch("csv_data/reset")},methods:{goToPrevStep:function(){var t=this.step_index;--t<=0&&(t=0),this.step_index=t},goToNextStep:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t||"function"!=typeof t){n.next=6;break}return n.next=3,t();case 3:if(i=n.sent,i){n.next=6;break}throw new Error("error going to next step");case 6:s=e.step_index,++s>=e.steps.length&&(s=e.steps.length-1),e.step_index=s;case 9:case"end":return n.stop()}}),n)})))()}}},g=_,x=(n("b631"),Object(m["a"])(g,i,s,!1,null,"1dd20ded",null));e["default"]=x.exports},b631:function(t,e,n){"use strict";n("1715")},d81d:function(t,e,n){"use strict";var i=n("23e7"),s=n("b727").map,a=n("1dde"),r=a("map");i({target:"Array",proto:!0,forced:!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},ee23:function(t,e,n){"use strict";n("64cc")}}]);
//# sourceMappingURL=advanced_import.umd.min.11.js.map