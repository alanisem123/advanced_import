(("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]=("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]||[]).push([[12],{4089:function(e,t,a){"use strict";var s=a("ee90"),r=a.n(s);r.a},b2b2:function(e,t,a){},c491:function(e,t,a){"use strict";var s=a("b2b2"),r=a.n(s);r.a},cf20:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",[e._v("Monitor the status of the Jobs.")]),a("JobsTable"),a("div",{staticClass:"d-flex legend-wrapper"},[a("b-card",{attrs:{title:"Status",tag:"article"}},[a("ul",[a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-primary",attrs:{"fixed-width":"",icon:["fas","bookmark"]}}),e._v(": "),a("span",[e._v("Job ready to be processed")])],1)]),a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-success",attrs:{"fixed-width":"",icon:["fas","check-circle"]}}),e._v(": "),a("span",[e._v("Job process completed")])],1)]),a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-secondary",attrs:{"fixed-width":"",icon:["fas","spinner"]}}),e._v(": "),a("span",[e._v("Job being processed")])],1)]),a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-danger",attrs:{"fixed-width":"",icon:["fas","exclamation-circle"]}}),e._v(": "),a("span",[e._v("Job stopped due to error")])],1)]),a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-secondary",attrs:{"fixed-width":"",icon:["fas","stop-circle"]}}),e._v(": "),a("span",[e._v("Job stopped by user")])],1)])])]),a("b-card",{staticClass:"ml-2",attrs:{title:"Actions",tag:"article"}},[a("ul",[a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-primary",attrs:{"fixed-width":"",icon:["fas","stopwatch"]}}),e._v(": "),a("span",[e._v("Stop a Job in progress")])],1)]),a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-success",attrs:{"fixed-width":"",icon:["fas","sync-alt"]}}),e._v(": "),a("span",[e._v("Start a stopped Job")])],1)]),a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-danger",attrs:{"fixed-width":"",icon:["fas","trash"]}}),e._v(": "),a("span",[e._v("Delete a Job and its associated file")])],1)])])]),a("b-card",{staticClass:"ml-2",attrs:{title:"Types",tag:"article"}},[a("ul",[a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-primary",attrs:{"fixed-width":"",icon:["fas","file-import"]}}),e._v(": "),a("span",[a("em",[e._v('"Import"')]),e._v(" type Job")])],1)]),a("li",[a("span",[a("font-awesome-icon",{staticClass:"text-danger",attrs:{"fixed-width":"",icon:["fas","file-export"]}}),e._v(": "),a("span",[a("em",[e._v('"Export"')]),e._v(" type Job")])],1)])])])],1)],1)},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overflow-auto"},[a("div",{staticClass:"d-flex flex-row justify-content-start align-items-start"},[a("b-button",{attrs:{size:"sm",variant:"info",disabled:e.loading},on:{click:e.getItems}},[e.loading?a("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}}):a("font-awesome-icon",{attrs:{icon:["fas","sync"]}}),a("span",[e._v(" Reload")])],1),a("b-modal",{attrs:{id:"modal-delete",title:"Delete jobs"},on:{ok:e.handleOkDelete}},[a("p",{staticClass:"my-4"},[e._v("Are you sure you want to delete all tasks for the current project?")])]),e.hasItems?a("b-pagination",{staticClass:"ml-2 mb-0",attrs:{"total-rows":e.rows,"per-page":e.per_page,"aria-controls":"my-table",size:"sm"},model:{value:e.current_page,callback:function(t){e.current_page=t},expression:"current_page"}}):e._e()],1),a("div",{staticClass:"table-wrapper"},[a("b-table",{staticClass:"my-2",attrs:{id:"my-table",items:e.items_proxy,fields:e.fields,"_per-page":"per_page","_current-page":"current_page",small:"",bordered:"",striped:"",hover:""},scopedSlots:e._u([{key:"cell(error)",fn:function(t){return[t.value?a("div",[a("div",{staticClass:"job-error text-muted small"},[e._v(e._s(t.value))])]):e._e()]}},{key:"cell(status)",fn:function(t){return[t.value?a("div",{staticClass:"d-flex justify-content-center align-items-center",attrs:{set:e.params=e.getStatusIcon(t.value)}},[a("font-awesome-icon",{class:e.params.class,attrs:{title:t.value,icon:e.params.icon,spin:e.params.spin}})],1):e._e()]}},{key:"cell(created_at)",fn:function(t){return[t.value?a("div",[e._v(e._s(t.value))]):e._e()]}},{key:"cell(updated_at)",fn:function(t){return[t.value?a("div",[e._v(e._s(t.value))]):e._e()]}},{key:"cell(completed_at)",fn:function(t){return[t.value?a("div",[e._v(e._s(t.value))]):e._e()]}},{key:"cell(type)",fn:function(t){return[t.value?a("div",{staticClass:"d-flex justify-content-center align-items-center"},["import"==t.value?a("font-awesome-icon",{staticClass:"text-primary",attrs:{title:t.value,icon:["fas","file-import"]}}):"export"==t.value?a("font-awesome-icon",{staticClass:"text-danger",attrs:{title:t.value,icon:["fas","file-export"]}}):e._e()],1):e._e()]}},{key:"cell(actions)",fn:function(t){return[t.item.id?a("div",{staticClass:"d-flex"},[a("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(a){return e.showSettings(t.item.settings)}}},[a("font-awesome-icon",{attrs:{icon:["fas","eye"],"fixed-width":""}})],1),"stopped"==t.item.status?a("b-button",{staticClass:"ml-2",attrs:{variant:"outline-success",size:"sm"},on:{click:function(a){return e.confirmStartTask(t.item.id)}}},[a("font-awesome-icon",{attrs:{icon:["fas","sync-alt"],"fixed-width":""}})],1):a("b-button",{staticClass:"ml-2",attrs:{variant:"outline-primary",size:"sm",disabled:e.getStopDisabled(t.item.status)},on:{click:function(a){return e.confirmStopTask(t.item.id)}}},[a("font-awesome-icon",{attrs:{icon:["fas","stopwatch"],"fixed-width":""}})],1),a("b-button",{staticClass:"ml-2",attrs:{variant:"outline-danger",size:"sm",disabled:e.getDeleteDisabled(t.item.status)},on:{click:function(a){return e.confirmDeleteTask(t.item.id)}}},[a("font-awesome-icon",{attrs:{icon:["fas","trash"],"fixed-width":""}})],1),e.debugMode?a("b-button",{staticClass:"ml-2",attrs:{variant:"outline-success",size:"sm"},on:{click:function(a){return e.showEdit(t.item)}}},[a("font-awesome-icon",{attrs:{icon:["fas","edit"],"fixed-width":""}})],1):e._e()],1):e._e()]}}])})],1),e.hasItems?a("b-pagination",{staticClass:"mb-2",attrs:{"total-rows":e.rows,"per-page":e.per_page,"aria-controls":"my-table",size:"sm"},model:{value:e.current_page,callback:function(t){e.current_page=t},expression:"current_page"}}):e._e(),a("b-modal",{ref:"modal-settings",attrs:{title:"Settings","ok-only":""}},[a("pre",[e._v(e._s(e.current_settings))])]),a("b-modal",{ref:"modal-edit",attrs:{title:"Edit","hide-footer":""}},[a("EditJob",{attrs:{job:e.editing_data},scopedSlots:e._u([{key:"footer",fn:function(t){var s=t.form;return[a("div",{staticClass:"d-flex justify-content-end"},[a("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"secondary"},on:{click:function(t){return e.$refs["modal-edit"].hide()}}},[e._v("Cancel")]),a("b-button",{attrs:{size:"sm",variant:"success"},on:{click:function(t){return e.editJob(s)}}},[e._v("OK")])],1)]}}])})],1)],1)},i=[],o=(a("99af"),a("c975"),a("13d5"),a("dca8"),a("b64b"),a("2909")),c=a("5530"),l=(a("96cf"),a("1da1")),u=a("2f62"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.form,(function(t,s){return a("b-form-group",{key:s,attrs:{label:s,"label-for":"input-"+s}},[a("b-form-input",{attrs:{id:"input-"+s},model:{value:e.form[s],callback:function(t){e.$set(e.form,s,t)},expression:"form[key]"}})],1)})),a("footer",[e._t("footer",null,{form:e.form})],2)],2)},p=[],f=(a("4fad"),a("53ca")),m=a("3835"),b={data:function(){return{form:{}}},props:{job:{type:Object,default:null}},method:{update:function(){}},watch:{job:{immediate:!0,handler:function(e){for(var t=0,a=Object.entries(e);t<a.length;t++){var s=Object(m["a"])(a[t],2),r=s[0],n=s[1];console.log(Object(f["a"])(n),r),null==n?n=void 0:"boolean"==typeof n?n=String(n):"object"==Object(f["a"])(n)&&(n=JSON.stringify(n)),this.$set(this.form,r,n)}}}}},v=b,h=a("2877"),g=Object(h["a"])(v,d,p,!1,null,null,null),_=g.exports,w=Object.freeze({READY:"ready",ERROR:"error",COMPLETED:"completed",PROCESSING:"processing",STOPPED:"stopped",DELETED:"deleted"}),x={components:{EditJob:_},data:function(){return{items:[],metadata:{},fields:[{key:"id",lable:"ID"},{key:"status",lable:"Status"},{key:"processed_lines",lable:"Processed Lines"},{key:"error",lable:"Error"},{key:"created_at",lable:"Created at"},{key:"updated_at",lable:"Updated at"},{key:"completed_at",lable:"Completed at"},{key:"type",lable:"Type"},{key:"actions",lable:"Actions"}],per_page:10,current_page:1,loading:!1,current_settings:null,editing_data:null}},created:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},computed:Object(c["a"])(Object(c["a"])({},Object(u["b"])({debugMode:function(e){return e.app.debugMode}})),{},{fields_proxy:function(){var e=Object(o["a"])(this.items);if(0==e.length)return[];var t=e.reduce((function(e,t){var a=Object.keys(t);return[].concat(Object(o["a"])(e),Object(o["a"])(a))}),[]);return[].concat(Object(o["a"])(t),Object(o["a"])(this.fields))},items_proxy:function(){var e=Object(o["a"])(this.items),t=this.per_page-e.length;t<0&&(t=0);for(var a=0;a<t;a++)e.push({});return e},rows:function(){var e=this.metadata.total,t=void 0===e?0:e;return t},hasItems:function(){try{return this.items.length>0}catch(e){return!1}}}),watch:{current_page:{immediate:!0,handler:function(){this.getItems()}}},methods:{getItems:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,s,r,n,i,o,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,e.items=[],e.metadata={},a=e.per_page,s=e.per_page*(e.current_page-1),t.next=8,e.$API.dispatch("jobs/get",{start:s,limit:a});case 8:r=t.sent,n=r.data,i=void 0===n?{}:n,o=i.data,c=void 0===o?{}:o,l=i.metadata,u=void 0===l?{}:l,e.items=c,e.metadata=u,t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),console.log(t.t0);case 18:return t.prev=18,e.loading=!1,t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[0,15,18,21]])})))()},handleOkDelete:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.dispatch("jobs/delete");case 2:a=t.sent,console.log(a),e.getItems();case 5:case"end":return t.stop()}}),t)})))()},getStopDisabled:function(e){return e!=w.PROCESSING},getDeleteDisabled:function(e){var t=[w.PROCESSING,w.DELETED];return t.indexOf(e)>=0},getStatusIcon:function(e){var t={icon:["fas","tasks"],spin:!1};switch(e){case w.READY:t=Object(c["a"])(Object(c["a"])({},t),{icon:["fas","bookmark"],class:"text-primary"});break;case w.COMPLETED:t=Object(c["a"])(Object(c["a"])({},t),{icon:["fas","check-circle"],class:"text-success"});break;case w.PROCESSING:t=Object(c["a"])(Object(c["a"])({},t),{icon:["fas","spinner"],class:"text-secondary",spin:!0});break;case w.ERROR:t=Object(c["a"])(Object(c["a"])({},t),{icon:["fas","exclamation-circle"],class:"text-danger"});break;case w.STOPPED:t=Object(c["a"])(Object(c["a"])({},t),{icon:["fas","stop-circle"],class:"text-secondary"});break;case w.DELETED:t=Object(c["a"])(Object(c["a"])({},t),{icon:["fas","minus-circle"],class:"text-danger"});break;default:break}return t},confirmStopTask:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s="Do you want to stop this job?",r="Stop job ID ".concat(e),a.next=4,t.$bvModal.msgBoxConfirm(s,{title:r,size:"sm",buttonSize:"sm",okVariant:"primary",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0",centered:!0});case 4:n=a.sent,n&&t.stopTask(e);case 6:case"end":return a.stop()}}),a)})))()},stopTask:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$API.dispatch("jobs/stop",{id:e});case 3:s="The job id ".concat(e," has been stopped."),r="Success",n="success",a.next=13;break;case 8:a.prev=8,a.t0=a["catch"](0),s="There was an error stopping the job ID ".concat(e,"."),r="Error",n="danger";case 13:return a.prev=13,t.$bvToast.toast(s,{title:r,autoHideDelay:1500,appendToast:!0,variant:n}),t.getItems(),a.finish(13);case 17:case"end":return a.stop()}}),a,null,[[0,8,13,17]])})))()},confirmStartTask:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s="Do you want to restart this job?",r="Start job ID ".concat(e),a.next=4,t.$bvModal.msgBoxConfirm(s,{title:r,size:"sm",buttonSize:"sm",okVariant:"primary",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0",centered:!0});case 4:n=a.sent,n&&t.startTask(e);case 6:case"end":return a.stop()}}),a)})))()},startTask:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$API.dispatch("jobs/start",{id:e});case 3:s="The job id ".concat(e," has been started."),r="Success",n="success",a.next=13;break;case 8:a.prev=8,a.t0=a["catch"](0),s="There was an error starting the job ID ".concat(e,"."),r="Error",n="danger";case 13:return a.prev=13,t.$bvToast.toast(s,{title:r,autoHideDelay:1500,appendToast:!0,variant:n}),t.getItems(),a.finish(13);case 17:case"end":return a.stop()}}),a,null,[[0,8,13,17]])})))()},confirmDeleteTask:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s="Do you want to delete this job?",r="Delete job ID ".concat(e),a.next=4,t.$bvModal.msgBoxConfirm(s,{title:r,size:"sm",buttonSize:"sm",okVariant:"danger",headerClass:"p-2 border-bottom-0",footerClass:"p-2 border-top-0",centered:!0});case 4:n=a.sent,n&&t.deleteTask(e);case 6:case"end":return a.stop()}}),a)})))()},deleteTask:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$API.dispatch("jobs/delete",{id:e});case 3:s="The job ID ".concat(e," has been deleted."),r="Success",n="success",a.next=13;break;case 8:a.prev=8,a.t0=a["catch"](0),s="There was an error deleting the job ID ".concat(e,"."),r="Error",n="danger";case 13:return a.prev=13,t.$bvToast.toast(s,{title:r,autoHideDelay:1500,appendToast:!0,variant:n}),t.getItems(),a.finish(13);case 17:case"end":return a.stop()}}),a,null,[[0,8,13,17]])})))()},showSettings:function(e){var t=this.$refs["modal-settings"];t&&(this.current_settings=e,t.show())},showEdit:function(e){var t=this.$refs["modal-edit"];t&&(this.editing_data=e,t.show())},editJob:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e.id,a.next=3,t.$API.dispatch("jobs/update",{id:s,data:Object(c["a"])({},e)});case 3:if(r=t.$refs["modal-edit"],r){a.next=6;break}return a.abrupt("return");case 6:t.getItems(),r.hide();case 8:case"end":return a.stop()}}),a)})))()}}},k=x,y=(a("c491"),Object(h["a"])(k,n,i,!1,null,"02d5f17d",null)),j=y.exports,O={components:{JobsTable:j},computed:{}},C=O,D=(a("4089"),Object(h["a"])(C,s,r,!1,null,"6e58a1a0",null));t["default"]=D.exports},ee90:function(e,t,a){}}]);
//# sourceMappingURL=advanced_import.umd.min.12.js.map