(("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]=("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]||[]).push([[10],{2532:function(e,t,i){"use strict";var n=i("23e7"),s=i("5a34"),a=i("1d80"),r=i("ab13");n({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(a(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,i){var n=i("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},8450:function(e,t,i){"use strict";i("a366")},a366:function(e,t,i){},a377:function(e,t,i){},ab0f:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",[e._v("The wizard guessed the mapping for you but you can adjust the mapping as needed and select the dynamic fields.")]),i("table",{staticClass:"table table-striped table-bordered"},[i("thead",[i("tr",[i("th",{staticClass:"text-nowrap"},[e._v("Dynamic "),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-dynamic-fields",modifiers:{"modal-dynamic-fields":!0}}],attrs:{size:"sm",variant:"outline-info"}},[i("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","question-circle"]}})],1)],1),i("th",[e._v("Destination Field (REDCap)")]),i("th",[e._v("Source Field (CSV file)")])])]),i("tbody",e._l(e.form_fields,(function(t,n){return i("tr",{key:n},[i("td",{staticClass:"min text-right"},[t.field_name!==e.primary_key?i("b-form-checkbox",{attrs:{disabled:!e.hasMapping(t.field_name),checked:e.isDynamic(t.field_name),switch:""},on:{input:function(i){return e.onDynamicToggle(t.field_name,i)}}}):e._e()],1),i("td",[i("span",{staticClass:"d-flex flex-row align-items-center"},[i("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.field_name))]),t.field_name===e.primary_key?i("font-awesome-icon",{staticClass:"icon text-warning ml-1",attrs:{title:"primary key",icon:["fas","star"]}}):e._e()],1),i("span",{staticClass:"small",domProps:{innerHTML:e._s(t.element_label)}})]),i("td",["checkbox"==t.element_type?[i("CsvFieldsDropDown",{attrs:{redcapFieldName:t.field_name,redcapFieldType:t.element_type}})]:[i("CsvFieldsSingleSelect",{attrs:{redcapFieldName:t.field_name}})]],2)])})),0)]),i("b-modal",{attrs:{id:"modal-dynamic-fields",title:"Dynamic fields","ok-only":""}},[i("div",{staticClass:"my-4"},[i("p",[e._v('Mark as "dynamic" the fields that are not relevant in determining the uniqueness of an entry (i.e. can be different compared to existing data).')]),i("p",[e._v('If you are importing "medications" in a repeated form, for example, you may want to mark the "status" field as dynamic since it could have changed since the previous import.')]),i("p",[e._v("Dynamic fields will be ignored when the wizard will try to determine the uniqueness of a row.")])])]),i("p",[e._v("Remember to map the primary key to proceed.")]),i("div",{staticClass:"buttons d-flex flex-row justify-content-between"},[e._t("left"),e._t("default"),e._t("right",null,{validation:e.$v})],2)],1)},s=[],a=i("3835"),r=i("5530"),d=(i("07ac"),i("4fad"),i("caad"),i("2532"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-container",e._l(e.checkboxOptions,(function(t,n){return i("b-row",{key:n,staticClass:"d-flex flex-column option"},[i("b-col",{staticClass:"small"},[i("span",[e._v("["+e._s(n)+"]:")]),i("span",{staticClass:"ml-1"},[e._v(e._s(t))])]),i("b-col",{},[i("CsvFieldsSingleSelect",{attrs:{redcapFieldName:e.redcapFieldName,fieldIndex:n}})],1)],1)})),1)}),c=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-dropdown",{staticClass:"w-100",attrs:{text:"Dropdown Button",variant:e.hasMapping?"success":"outline-primary",lazy:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[i("span",[e._v(e._s(e.selectedText))])]},proxy:!0}])},[i("b-dropdown-item",{attrs:{active:e.skip},on:{click:function(t){return e.onChange(null)}}},[e._v("-- skip --")]),e._l(e.csv_fields,(function(t,n){return i("b-dropdown-item",{key:n,attrs:{disabled:!e.isMapped(n)&&e.isMappedElsewhere(n),active:e.isMapped(n)},on:{click:function(t){return e.onChange(n)}}},[i("span",[e._v(e._s(t))])])}))],2)],1)},l=[],u=(i("8ba4"),i("a9e3"),i("4de4"),i("2f62")),p={data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(u["b"])({csv_fields:function(e){return e.csv_data.fields},mapping:function(e){return e.import_settings.mapping}})),{},{options:function(){var e=this.csv_fields,t=[],i={value:null,text:"-- skip --"};for(var n in t.push(i),e){var s={value:n,text:e[n]};t.push(s)}return t},csvIndexes:function(){return this.$store.getters["import_settings/mappedCsvFields"](this.redcapFieldName)},selectedText:function(){var e="--- skip ---",t=this.csvIndexes;if(t.length<1)return e;var i=t[this.fieldIndex];return Number.isInteger(i)?this.csv_fields[i]:e},skip:function(){return!Array.isArray(this.csvIndexes)||!Number.isInteger(this.csvIndexes[this.fieldIndex])},hasMapping:function(){return Number.isInteger(this.csvIndexes[this.fieldIndex])}}),props:{redcapFieldName:{type:String,default:""},redcapFieldType:{type:String,default:""},fieldIndex:{type:[Number,String],default:0}},methods:{isMappedElsewhere:function(e){for(var t=Object(r["a"])({},this.mapping),i=0,n=Object.entries(t);i<n.length;i++){var s=Object(a["a"])(n[i],2),d=s[0],c=s[1],o=void 0===c?{}:c;if(d==this.redcapFieldName){var l=Object.values(o).filter((function(t,i){return i!=e}));if(l.indexOf(e)>=0)return!0}else if(Object.values(o).indexOf(e)>=0)return!0}return!1},isMapped:function(e){return this.csvIndexes[this.fieldIndex]==e},onChange:function(e){var t=this.redcapFieldName,i=e,n=this.fieldIndex;this.$store.dispatch("import_settings/setFieldMapping",{fieldName:t,csvIndex:i,fieldIndex:n})}}},f=p,m=i("2877"),h=Object(m["a"])(f,o,l,!1,null,"275dd28e",null),v=h.exports,_={components:{CsvFieldsSingleSelect:v},computed:{checkboxOptions:function(){var e=this.$store.getters["settings/checkboxFieldOptions"](this.redcapFieldName);return e}},props:{redcapFieldName:{type:String,default:""},redcapFieldType:{type:String,default:""}},methods:{}},g=_,y=(i("8450"),Object(m["a"])(g,d,c,!1,null,"0c8532ff",null)),b=y.exports,x={components:{CsvFieldsDropDown:b,CsvFieldsSingleSelect:v},data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(u["b"])({csv_fields:function(e){return e.csv_data.fields},primary_key:function(e){return e.import_settings.primary_key},mapping:function(e){return e.import_settings.mapping},dynamic_fields:function(e){return e.import_settings.dynamic_fields}})),{},{form_fields:function(){var e=this.$store.state.import_settings.form_name,t=this.primary_key,i=this.$store.getters["settings/mappable_fields"](e,t);return i}}),methods:{onDynamicToggle:function(e,t){this.$store.dispatch("import_settings/toggleDynamicField",{field:e,checked:t})},hasMapping:function(e){var t=this.$store.getters["import_settings/mappedCsvFields"](e);return Object.values(t).length>0},isDynamic:function(e){return this.dynamic_fields.indexOf(e)>=0}},validations:function(){var e=function(e){for(var t=[],i=0,n=Object.entries(e);i<n.length;i++){var s=Object(a["a"])(n[i],2),r=s[0],d=s[1],c=void 0===d?{}:d;Object.values(c).length>0&&t.push(r)}return t};return{mapping:{required:function(t){var i=e(t);return i.length>0},primaryKeyIsMapped:function(t){var i=e(t),n=this.primary_key;return i.includes(n)}}}}},k=x,w=(i("dc45"),Object(m["a"])(k,n,s,!1,null,"524a07fe",null));t["default"]=w.exports},ab13:function(e,t,i){var n=i("b622"),s=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[s]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,i){"use strict";var n=i("23e7"),s=i("4d64").includes,a=i("44d2");n({target:"Array",proto:!0},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},dc45:function(e,t,i){"use strict";i("a377")}}]);
//# sourceMappingURL=advanced_import.umd.min.10.js.map