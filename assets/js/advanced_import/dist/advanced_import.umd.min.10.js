(("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]=("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]||[]).push([[10],{1643:function(e,t,n){},2532:function(e,t,n){"use strict";var i=n("23e7"),s=n("5a34"),a=n("1d80"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(a(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(e,t,n){var i=n("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},"5ae9":function(e,t,n){"use strict";n("a5e6")},8789:function(e,t,n){"use strict";n("1643")},a5e6:function(e,t,n){},ab0f:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v("The wizard guessed the mapping for you but you can adjust the mapping as needed and select the dynamic fields.")]),n("table",{staticClass:"table table-striped table-bordered"},[n("thead",[n("tr",[n("th",{staticClass:"text-nowrap"},[e._v("Dynamic "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-dynamic-fields",modifiers:{"modal-dynamic-fields":!0}}],attrs:{size:"sm",variant:"outline-info"}},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","question-circle"]}})],1)],1),n("th",[e._v("Destination Field (REDCap)")]),n("th",[e._v("Source Field (CSV file)")])])]),n("tbody",e._l(e.form_fields,(function(t,i){return n("tr",{key:i},[n("td",{staticClass:"min text-right"},[t.field_name!==e.primary_key?n("b-form-checkbox",{attrs:{disabled:!e.hasMapping(t.field_name),checked:e.isDynamic(t.field_name),switch:""},on:{input:function(n){return e.onDynamicToggle(t.field_name,n)}}}):e._e()],1),n("td",[n("span",{staticClass:"d-flex flex-row align-items-center"},[n("span",{staticClass:"font-weight-bold"},[e._v(e._s(t.field_name))]),t.field_name===e.primary_key?n("font-awesome-icon",{staticClass:"icon text-warning ml-1",attrs:{title:"primary key",icon:["fas","star"]}}):e._e()],1),n("span",{staticClass:"small",domProps:{innerHTML:e._s(t.element_label)}})]),n("td",["checkbox"==t.element_type?[n("CsvFieldsDropDown",{attrs:{redcapFieldName:t.field_name,redcapFieldType:t.element_type}})]:[n("CsvFieldsSingleSelect",{attrs:{redcapFieldName:t.field_name}})]],2)])})),0)]),n("b-modal",{attrs:{id:"modal-dynamic-fields",title:"Dynamic fields","ok-only":""}},[n("div",{staticClass:"my-4"},[n("p",[e._v('Mark as "dynamic" the fields that are not relevant in determining the uniqueness of an entry (i.e. can be different compared to existing data).')]),n("p",[e._v('If you are importing "medications" in a repeated form, for example, you may want to mark the "status" field as dynamic since it could have changed since the previous import.')]),n("p",[e._v("Dynamic fields will be ignored when the wizard will try to determine the uniqueness of a row.")])])]),n("p",[e._v("Remember to map the primary key to proceed.")]),n("div",{staticClass:"buttons d-flex flex-row justify-content-between"},[e._t("left"),e._t("default"),e._t("right",null,{validation:e.$v})],2)],1)},s=[],a=n("3835"),r=n("5530"),d=(n("4fad"),n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",e._l(e.checkboxOptions,(function(t,i){return n("b-row",{key:i,staticClass:"d-flex flex-column option"},[n("b-col",{staticClass:"small"},[n("span",[e._v(e._s(i)+")")]),n("span",{staticClass:"ml-1"},[e._v(e._s(t))])]),n("b-col",{},[n("CsvFieldsSingleSelect",{attrs:{redcapFieldName:e.redcapFieldName,fieldIndex:i}})],1)],1)})),1)}),c=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-dropdown",{staticClass:"w-100",attrs:{text:"Dropdown Button",variant:e.hasMapping?"success":"outline-primary",lazy:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("span",[e._v(e._s(e.selectedText))])]},proxy:!0}])},[n("b-dropdown-item",{attrs:{active:e.skip},on:{click:function(t){return e.onChange(null)}}},[e._v("-- skip --")]),e._l(e.csv_fields,(function(t,i){return n("b-dropdown-item",{key:i,attrs:{disabled:!e.isMapped(i)&&e.isMappedElsewhere(i),active:e.isMapped(i)},on:{click:function(t){return e.onChange(i)}}},[n("span",[e._v(e._s(t))])])}))],2)},l=[],p=(n("8ba4"),n("a9e3"),n("4de4"),n("2f62")),u={data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(p["b"])({csv_fields:function(e){return e.csv_data.fields},mapping:function(e){return e.import_settings.mapping}})),{},{options:function(){var e=this.csv_fields,t=[],n={value:null,text:"-- skip --"};for(var i in t.push(n),e){var s={value:i,text:e[i]};t.push(s)}return t},csvIndexes:function(){return this.$store.getters["import_settings/mappedCsvFields"](this.redcapFieldName)},selectedText:function(){var e="--- skip ---",t=this.csvIndexes;if(t.length<1)return e;var n=t[this.fieldIndex];return Number.isInteger(n)?this.csv_fields[n]:e},skip:function(){return!Array.isArray(this.csvIndexes)||!Number.isInteger(this.csvIndexes[this.fieldIndex])},hasMapping:function(){return Number.isInteger(this.csvIndexes[this.fieldIndex])}}),props:{redcapFieldName:{type:String,default:""},redcapFieldType:{type:String,default:""},fieldIndex:{type:[Number,String],default:0}},methods:{isMappedElsewhere:function(e){for(var t=Object(r["a"])({},this.mapping),n=0,i=Object.entries(t);n<i.length;n++){var s=Object(a["a"])(i[n],2),d=s[0],c=s[1];if(Array.isArray(c)||(c=[]),d==this.redcapFieldName){var o=c.filter((function(t,n){return n!=e}));if(o.indexOf(e)>=0)return!0}else if(c.indexOf(e)>=0)return!0}return!1},isMapped:function(e){return this.csvIndexes[this.fieldIndex]==e},onChange:function(e){var t=this.redcapFieldName,n=e,i=this.fieldIndex;this.$store.dispatch("import_settings/setFieldMapping",{fieldName:t,csvIndex:n,fieldIndex:i})}}},f=u,m=n("2877"),h=Object(m["a"])(f,o,l,!1,null,"1111741d",null),v=h.exports,_={components:{CsvFieldsSingleSelect:v},computed:{checkboxOptions:function(){var e=this.$store.getters["settings/checkboxFieldOptions"](this.redcapFieldName);return e}},props:{redcapFieldName:{type:String,default:""},redcapFieldType:{type:String,default:""}},methods:{}},g=_,y=(n("5ae9"),Object(m["a"])(g,d,c,!1,null,"577043fc",null)),b=y.exports,x={components:{CsvFieldsDropDown:b,CsvFieldsSingleSelect:v},data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(p["b"])({csv_fields:function(e){return e.csv_data.fields},primary_key:function(e){return e.import_settings.primary_key},mapping:function(e){return e.import_settings.mapping},dynamic_fields:function(e){return e.import_settings.dynamic_fields}})),{},{form_fields:function(){var e=this.$store.state.import_settings.form_name,t=this.primary_key,n=this.$store.getters["settings/mappable_fields"](e,t);return n}}),methods:{onDynamicToggle:function(e,t){this.$store.dispatch("import_settings/toggleDynamicField",{field:e,checked:t})},hasMapping:function(e){var t=this.$store.getters["import_settings/mappedCsvFields"](e);return t.length>0},isDynamic:function(e){return this.dynamic_fields.indexOf(e)>=0}},validations:function(){var e=function(e){for(var t=[],n=0,i=Object.entries(e);n<i.length;n++){var s=Object(a["a"])(i[n],2),r=s[0],d=s[1];d.length>0&&t.push(r)}return t};return{mapping:{required:function(t){var n=e(t);return n.length>0},primaryKeyIsMapped:function(t){var n=e(t),i=this.primary_key;return n.includes(i)}}}}},k=x,w=(n("8789"),Object(m["a"])(k,i,s,!1,null,"0b3c2857",null));t["default"]=w.exports},ab13:function(e,t,n){var i=n("b622"),s=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[s]=!1,"/./"[e](t)}catch(i){}}return!1}},caad:function(e,t,n){"use strict";var i=n("23e7"),s=n("4d64").includes,a=n("44d2");i({target:"Array",proto:!0},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);
//# sourceMappingURL=advanced_import.umd.min.10.js.map