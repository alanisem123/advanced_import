(("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]=("undefined"!==typeof self?self:this)["webpackJsonpadvanced_import"]||[]).push([[10],{"08d5":function(e,t,i){},2532:function(e,t,i){"use strict";var n=i("23e7"),a=i("5a34"),s=i("1d80"),r=i("ab13");n({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(s(this)).indexOf(a(e),arguments.length>1?arguments[1]:void 0)}})},"46de":function(e,t,i){"use strict";i("08d5")},"5a34":function(e,t,i){var n=i("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},ab0f:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",[e._v("The wizard guessed the mapping for you but you can adjust the mapping as needed and select the dynamic fields.")]),i("table",{staticClass:"table table-striped table-bordered"},[i("thead",[i("tr",[i("th",{staticClass:"text-nowrap"},[e._v("Dynamic "),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-dynamic-fields",modifiers:{"modal-dynamic-fields":!0}}],attrs:{size:"sm",variant:"outline-info"}},[i("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","question-circle"]}})],1)],1),i("th",[e._v("Destination Field (REDCap)")]),i("th",[e._v("Source Field (CSV file)")])])]),i("tbody",e._l(e.form_fields,(function(t,n){return i("tr",{key:n},[i("td",{staticClass:"min text-right"},[t.field_name!==e.primary_key?i("b-form-checkbox",{attrs:{disabled:!e.hasMapping(t.field_name),checked:e.isDynamic(t.field_name),switch:""},on:{input:function(i){return e.onDynamicToggle(t.field_name,i)}}}):e._e()],1),i("td",[i("span",{staticClass:"d-flex flex-row align-items-center"},[i("span",[e._v(e._s(t.element_label))]),t.field_name===e.primary_key?i("font-awesome-icon",{staticClass:"icon text-warning ml-1",attrs:{title:"primary key",icon:["fas","star"]}}):e._e()],1),i("span",{staticClass:"small"},[e._v("("+e._s(t.field_name)+")")])]),i("td",[i("CsvFieldsDropDown",{attrs:{redcapFieldName:t.field_name,redcapFieldType:t.element_type}})],1)])})),0)]),i("b-modal",{attrs:{id:"modal-dynamic-fields",title:"Dynamic fields","ok-only":""}},[i("div",{staticClass:"my-4"},[i("p",[e._v('Mark as "dynamic" the fields that are not relevant in determining the uniqueness of an entry (i.e. can be different compared to existing data).')]),i("p",[e._v('If you are importing "medications" in a repeated form, for example, you may want to mark the "status" field as dynamic since it could have changed since the previous import.')]),i("p",[e._v("Dynamic fields will be ignored when the wizard will try to determine the uniqueness of a row.")])])]),i("p",[e._v("Remember to map the primary key to proceed.")]),i("div",{staticClass:"buttons d-flex flex-row justify-content-between"},[e._t("left"),e._t("default"),e._t("right",null,{validation:e.$v})],2)],1)},a=[],s=i("3835"),r=i("5530"),d=(i("4fad"),i("caad"),i("2532"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-dropdown",{staticClass:"checkbox-dropdown bg-white",attrs:{variant:"outline-secondary"},scopedSlots:e._u([{key:"button-content",fn:function(){return[i("div",[i("span",[e._v(e._s(e.buttonText))])])]},proxy:!0}])},[i("b-dropdown-text",[e.multiSelectEnabled?i("span",{staticClass:"small font-italic text-info"},[e._v("multiple selection")]):i("span",{staticClass:"small font-italic text-muted"},[e._v("single selection")])]),e._l(e.csv_fields,(function(t,n){return i("b-dropdown-text",{key:n},[i("div",{staticClass:"d-flex"},[i("b-form-checkbox",{attrs:{disabled:e.isDisabled(n),checked:e.isMapped(n),switch:""},nativeOn:{input:function(t){return t.preventDefault(),e.onSelected(n,t.target.checked)}}},[i("span",[e._v(e._s(t))])])],1)])}))],2)}),c=[],o=(i("99af"),i("4de4"),i("2f62")),l={computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])({csv_fields:function(e){return e.csv_data.fields},mapping:function(e){return e.import_settings.mapping}})),{},{buttonText:function(){var e=this.selected.length;if(0==e)return"--- skip ---";var t=this.selected[0],i=this.csv_fields[t];return 1==e?i:"".concat(i," and ").concat(e-1," more")},selected:function(){return this.$store.getters["import_settings/mappedCsvFields"](this.redcapFieldName)},multiSelectEnabled:function(){return"checkbox"==this.redcapFieldType}}),props:{redcapFieldName:{type:String,default:""},redcapFieldType:{type:String,default:""}},methods:{isDisabled:function(e){if(this.isMappedElsewhere(e))return!0;var t=this.selected.filter((function(t){return t!=e}));return t.length>0&&!this.multiSelectEnabled},isMappedElsewhere:function(e){for(var t=Object(r["a"])({},this.mapping),i=0,n=Object.entries(t);i<n.length;i++){var a=Object(s["a"])(n[i],2),d=a[0],c=a[1];if(d!=this.redcapFieldName&&c.indexOf(e)>=0)return!0}return!1},isMapped:function(e){return this.selected.indexOf(e)>=0},onSelected:function(e,t){var i=this.redcapFieldName;this.$store.dispatch("import_settings/toggleCsvField",{fieldName:i,csvIndex:e,checked:t})}}},u=l,f=i("2877"),p=Object(f["a"])(u,d,c,!1,null,null,null),m=p.exports,h={components:{CsvFieldsDropDown:m},data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])({csv_fields:function(e){return e.csv_data.fields},primary_key:function(e){return e.import_settings.primary_key},mapping:function(e){return e.import_settings.mapping},dynamic_fields:function(e){return e.import_settings.dynamic_fields}})),{},{form_fields:function(){var e=this.$store.state.import_settings.form_name,t=this.$store.getters["settings/form_fields"](e);return t}}),methods:{onDynamicToggle:function(e,t){this.$store.dispatch("import_settings/toggleDynamicField",{field:e,checked:t})},hasMapping:function(e){var t=this.$store.getters["import_settings/mappedCsvFields"](e);return t.length>0},isDynamic:function(e){return this.dynamic_fields.indexOf(e)>=0}},validations:function(){var e=function(e){for(var t=[],i=0,n=Object.entries(e);i<n.length;i++){var a=Object(s["a"])(n[i],2),r=a[0],d=a[1];d.length>0&&t.push(r)}return t};return{mapping:{required:function(t){var i=e(t);return i.length>0},primaryKeyIsMapped:function(t){var i=e(t),n=this.primary_key;return i.includes(n)}}}}},v=h,_=(i("46de"),Object(f["a"])(v,n,a,!1,null,"57596278",null));t["default"]=_.exports},ab13:function(e,t,i){var n=i("b622"),a=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[a]=!1,"/./"[e](t)}catch(n){}}return!1}},caad:function(e,t,i){"use strict";var n=i("23e7"),a=i("4d64").includes,s=i("44d2");n({target:"Array",proto:!0},{includes:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")}}]);
//# sourceMappingURL=advanced_import.umd.min.10.js.map